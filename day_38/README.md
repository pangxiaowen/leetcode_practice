# Day_38

## 买卖股票的最佳时机II

### 题目

给定一个数组，它的第 i 个元素是一支给定股票第 i 天的价格。

设计一个算法来计算你所能获取的最大利润。你可以尽可能地完成更多的交易（多次买卖一支股票）。

注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。

### 思路

1. 不能同时参与多笔交易， 同一时间只能持有一只股票， 如果想要购买股票，必须保证手上没有股票。
2. 对于第i天，有两种状态， 1. 持有股票 2. 不持有股票
3. 确定数组下标的含义 \
    dp[i][0]    第i天， 持有股票的最大利润 \
    dp[i][1]    第i天， 不持有股票的最大利润 
4. DP公式 \
    保持第i-1天的状态， 或者 第i-1天不持有股票的状态 - 股票的价格 (买入)  \
    dp[i][0] = std::max(dp[i-1][0], dp[i-1][1] - price[i]) \
    保持第i-1天的状态， 或者 第i-1天持有股票的状态 + 股票的价格 (卖出) \
    dp[i][0] = std::max(dp[i-1][1], dp[i-1][0] + price[i])
5. 初始化 \
    dp[0][0] = -price[0] 第0天买入 \
    do[0][1] = 0  第0天卖出(当天买入，当天卖出，利润为0)
6. 遍历顺序 \
    从小到大

## 买卖股票的最佳时机III

### 题目

给定一个数组，它的第 i 个元素是一支给定的股票在第 i 天的价格。

设计一个算法来计算你所能获取的最大利润。你最多可以完成 两笔 交易。

注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。

### 思路

1. 最多完成两笔交易 --> 最多完成两次的买入和卖出
2. 不能同时参与多笔交易 --> 同一时间只能持有一只股票
3. 上一道题目的交易次数是不做限制的，可以多次买入卖出，本题只能进行两次。
4. 对于第i天的状态 \
    0. 没有操作 
    1. 完成第一次买入 
    2. 完成第一次卖出 
    3. 完成第二次买入
    4. 完成第二次卖出
5. 数组下标的含义 \
    dp[i][0] 第i天不进行任何操作时候的最大利润 \
    dp[i][1] 第i天进行第一次买入的最大利润 \
    ...
6. DP公式 \
    dp[i][0] = dp[i-1][0] \
    dp[i][1] = std::max(dp[i - 1][1], dp[i - 1][0] - price[i]); \
    dp[i][2] = std::max(dp[i - 1][2], dp[i - 1][1] + price[i]); \
    dp[i][3] = std::max(dp[i - 1][3], dp[i - 1][2] - price[i]); \
    dp[i][4] = std::max(dp[i - 1][4], dp[i - 1][3] + price[i]);

7. 初始化 \
    对于买入操作进行初始化 \
    dp[0][1] = -price[0]; \
    dp[0][3] = -price[0];

8. 遍历顺序 \
    从小到大。

## 买卖股票的最佳时机IV

### 题目

给定一个整数数组 prices ，它的第 i 个元素 prices[i] 是一支给定的股票在第 i 天的价格。

设计一个算法来计算你所能获取的最大利润。你最多可以完成 k 笔交易。

注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。

### 思路

1. 同上